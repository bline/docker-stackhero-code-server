# =============================================================
# Fly.io Deployment Configuration for code-server
#
# This configuration file is used to generate the fly.toml file
# for deploying code-server on fly.io. Adjust the settings below
# as needed for your project.
# =============================================================

# Project name on fly.io.
# Your app will be accessible at: https://<PROJECT_NAME>.fly.dev/
PROJECT_NAME="my-code-server"

# ----------------------------------------------------------------
# Node.js Installation Settings
# ----------------------------------------------------------------
# Set to true to install a specific version of Node.js from Nodesource.
# If false (or not set to true), Node.js will be installed from the default apt repository.
INSTALL_NODE_FROM_NODESOURCE=true

# Specify the major version of Node.js to install (used when INSTALL_NODE_FROM_NODESOURCE is true).
NODE_MAJOR=22

# ----------------------------------------------------------------
# code-server Settings
# ----------------------------------------------------------------
# Internal port for code-server.
SERVER_PORT=8080

# Specify the code-server version to install.
# To always install the latest version, comment out this line.
CODE_SERVER_VERSION=4.96.4

# ----------------------------------------------------------------
# Git Configuration
# ----------------------------------------------------------------
# Set global Git username.
GIT_USER="Your Name"

# Set global Git email.
GIT_EMAIL="you@domain.com"

# ----------------------------------------------------------------
# Timezone Configuration
# ----------------------------------------------------------------
# Define the server's timezone.
TZ="America/New_York"

# ----------------------------------------------------------------
# Workspace Settings
# ----------------------------------------------------------------
# Define the directory where the volume is mounted and where you'll be coding.
# This directory will also serve as the user's home directory.
DEFAULT_WORKSPACE="/workspace"

# ----------------------------------------------------------------
# Fly.io VM Configuration
# ----------------------------------------------------------------
# VM size and memory settings.
VM_SIZE=shared-cpu-2x
VM_MEMORY=2gb

# Set the initial disk size for the /workspace volume.
INITIAL_DISK_SIZE="5gb"

# ----------------------------------------------------------------
# Idle Timeout and Auto-Stop Settings
# ----------------------------------------------------------------
# Define the idle timeout (in seconds) before the machine is put to sleep.
# Note: Must be an integer not exceeding 900 seconds (15 minutes).
IDLE_TIMEOUT=900

# Specify the action to take when the machine has been idle for the defined timeout.
# Options:
#   off     - Do not stop the machine (keep running)
#   stop    - Stop the machine after IDLE_TIMEOUT seconds
#   suspend - Suspend the machine after IDLE_TIMEOUT seconds
AUTO_STOP_MACHINE="stop"

# ----------------------------------------------------------------
# User Settings
# ----------------------------------------------------------------
# Define the username that will be created to run code-server.
USER_NAME="coder"

# ----------------------------------------------------------------
# Optional Tools Installation
# ----------------------------------------------------------------
# Set to true to install container-structure-test, a tool to validate the
# container structure and verify image contents. If set to false, it will not be installed.
INSTALL_CONTAINER_STRUCTURE_TEST=false

# Specify the version (or tag) of container-structure-test to install.
# For example, "latest" or a specific version such as "v1.0.0".
CONTAINER_STRUCTURE_TEST_VERSION="latest"

# Set to true to install hadolint, a linter for Dockerfiles that enforces best practices.
# If set to false, hadolint will not be installed.
INSTALL_HADOLINT=false

# Specify the version of hadolint to install.
# For example, "v2.12.0" or "latest" (if supported).
HADOLINT_VERSION="v2.12.0"
